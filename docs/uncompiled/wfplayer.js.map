{"version":3,"file":"wfplayer.js","sources":["../../node_modules/@babel/runtime/helpers/defineProperty.js","../../node_modules/@babel/runtime/helpers/classCallCheck.js","../../node_modules/@babel/runtime/helpers/typeof.js","../../node_modules/@babel/runtime/helpers/assertThisInitialized.js","../../node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../../node_modules/@babel/runtime/helpers/getPrototypeOf.js","../../node_modules/@babel/runtime/helpers/createClass.js","../../node_modules/@babel/runtime/helpers/setPrototypeOf.js","../../node_modules/@babel/runtime/helpers/inherits.js","../../node_modules/option-validator/dist/option-validator.js","../../src/emitter.js","../../src/events.js","../../node_modules/@babel/runtime/helpers/isNativeFunction.js","../../node_modules/@babel/runtime/helpers/construct.js","../../node_modules/@babel/runtime/helpers/wrapNativeSuper.js","../../node_modules/duration-time-conversion/index.js","../../src/utils.js","../../src/template.js","../../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../../node_modules/@babel/runtime/helpers/nonIterableRest.js","../../node_modules/@babel/runtime/helpers/slicedToArray.js","../../src/drawer.js","../../node_modules/lodash/isObject.js","../../node_modules/lodash/_freeGlobal.js","../../node_modules/lodash/_root.js","../../node_modules/lodash/now.js","../../node_modules/lodash/_Symbol.js","../../node_modules/lodash/_getRawTag.js","../../node_modules/lodash/_objectToString.js","../../node_modules/lodash/_baseGetTag.js","../../node_modules/lodash/isObjectLike.js","../../node_modules/lodash/isSymbol.js","../../node_modules/lodash/toNumber.js","../../node_modules/lodash/debounce.js","../../node_modules/lodash/throttle.js","../../src/decoder.js","../../src/loader.js","../../src/controller.js","../../src/index.js"],"sourcesContent":["function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","!function(r,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):r.optionValidator=t()}(this,function(){\"use strict\";function e(r){return(e=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&\"function\"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?\"symbol\":typeof r})(r)}var n=Object.prototype.toString,c=function(r){if(void 0===r)return\"undefined\";if(null===r)return\"null\";var t=e(r);if(\"boolean\"===t)return\"boolean\";if(\"string\"===t)return\"string\";if(\"number\"===t)return\"number\";if(\"symbol\"===t)return\"symbol\";if(\"function\"===t)return function(r){return\"GeneratorFunction\"===o(r)}(r)?\"generatorfunction\":\"function\";if(function(r){return Array.isArray?Array.isArray(r):r instanceof Array}(r))return\"array\";if(function(r){if(r.constructor&&\"function\"==typeof r.constructor.isBuffer)return r.constructor.isBuffer(r);return!1}(r))return\"buffer\";if(function(r){try{if(\"number\"==typeof r.length&&\"function\"==typeof r.callee)return!0}catch(r){if(-1!==r.message.indexOf(\"callee\"))return!0}return!1}(r))return\"arguments\";if(function(r){return r instanceof Date||\"function\"==typeof r.toDateString&&\"function\"==typeof r.getDate&&\"function\"==typeof r.setDate}(r))return\"date\";if(function(r){return r instanceof Error||\"string\"==typeof r.message&&r.constructor&&\"number\"==typeof r.constructor.stackTraceLimit}(r))return\"error\";if(function(r){return r instanceof RegExp||\"string\"==typeof r.flags&&\"boolean\"==typeof r.ignoreCase&&\"boolean\"==typeof r.multiline&&\"boolean\"==typeof r.global}(r))return\"regexp\";switch(o(r)){case\"Symbol\":return\"symbol\";case\"Promise\":return\"promise\";case\"WeakMap\":return\"weakmap\";case\"WeakSet\":return\"weakset\";case\"Map\":return\"map\";case\"Set\":return\"set\";case\"Int8Array\":return\"int8array\";case\"Uint8Array\":return\"uint8array\";case\"Uint8ClampedArray\":return\"uint8clampedarray\";case\"Int16Array\":return\"int16array\";case\"Uint16Array\":return\"uint16array\";case\"Int32Array\":return\"int32array\";case\"Uint32Array\":return\"uint32array\";case\"Float32Array\":return\"float32array\";case\"Float64Array\":return\"float64array\"}if(function(r){return\"function\"==typeof r.throw&&\"function\"==typeof r.return&&\"function\"==typeof r.next}(r))return\"generator\";switch(t=n.call(r)){case\"[object Object]\":return\"object\";case\"[object Map Iterator]\":return\"mapiterator\";case\"[object Set Iterator]\":return\"setiterator\";case\"[object String Iterator]\":return\"stringiterator\";case\"[object Array Iterator]\":return\"arrayiterator\"}return t.slice(8,-1).toLowerCase().replace(/\\s/g,\"\")};function o(r){return r.constructor?r.constructor.name:null}function f(r,t){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[\"option\"];return s(r,t,e),y(r,t,e),function(a,i,u){var r=c(i),t=c(a);if(\"object\"===r){if(\"object\"!==t)throw new Error(\"[Type Error]: '\".concat(u.join(\".\"),\"' require 'object' type, but got '\").concat(t,\"'\"));Object.keys(i).forEach(function(r){var t=a[r],e=i[r],n=u.slice();n.push(r),s(t,e,n),y(t,e,n),f(t,e,n)})}if(\"array\"===r){if(\"array\"!==t)throw new Error(\"[Type Error]: '\".concat(u.join(\".\"),\"' require 'array' type, but got '\").concat(t,\"'\"));a.forEach(function(r,t){var e=a[t],n=i[t]||i[0],o=u.slice();o.push(t),s(e,n,o),y(e,n,o),f(e,n,o)})}}(r,t,e),r}function s(r,t,e){if(\"string\"===c(t)){var n=c(r);if(!(-1<t.indexOf(\"|\")?t.split(\"|\").map(function(r){return r.toLowerCase().trim()}).filter(Boolean).some(function(r){return n===r}):t.toLowerCase().trim()===n))throw new Error(\"[Type Error]: '\".concat(e.join(\".\"),\"' require '\").concat(t,\"' type, but got '\").concat(n,\"'\"))}}function y(r,t,e){if(\"function\"===c(t)){var n=t(r,c(r),e);if(!0!==n){var o=c(n);throw\"string\"===o?new Error(n):\"error\"===o?n:new Error(\"[Validator Error]: The scheme for '\".concat(e.join(\".\"),\"' validator require return true, but got '\").concat(n,\"'\"))}}}return f.kindOf=c,f});\n","export default class Emitter {\n    on(name, fn, ctx) {\n        const e = this.e || (this.e = {});\n        (e[name] || (e[name] = [])).push({ fn, ctx });\n        return this;\n    }\n\n    once(name, fn, ctx) {\n        const self = this;\n        function listener(...args) {\n            self.off(name, listener);\n            fn.apply(ctx, args);\n        }\n        listener._ = fn;\n        return this.on(name, listener, ctx);\n    }\n\n    emit(name, ...data) {\n        const evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n        for (let i = 0; i < evtArr.length; i += 1) {\n            evtArr[i].fn.apply(evtArr[i].ctx, data);\n        }\n        return this;\n    }\n\n    off(name, callback) {\n        const e = this.e || (this.e = {});\n        const evts = e[name];\n        const liveEvents = [];\n        if (evts && callback) {\n            for (let i = 0, len = evts.length; i < len; i += 1) {\n                if (evts[i].fn !== callback && evts[i].fn._ !== callback) liveEvents.push(evts[i]);\n            }\n        }\n        if (liveEvents.length) {\n            e[name] = liveEvents;\n        } else {\n            delete e[name];\n        }\n        return this;\n    }\n}\n","export default class Events {\n    constructor() {\n        this.destroyEvents = [];\n        this.proxy = this.proxy.bind(this);\n    }\n\n    proxy(target, name, callback, option = {}) {\n        if (Array.isArray(name)) {\n            name.forEach(item => this.proxy(target, item, callback, option));\n        } else {\n            target.addEventListener(name, callback, option);\n            this.destroyEvents.push(() => {\n                target.removeEventListener(name, callback, option);\n            });\n        }\n    }\n\n    destroy() {\n        this.destroyEvents.forEach(event => event());\n    }\n}\n","function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nmodule.exports = _isNativeFunction;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    module.exports = _construct = Reflect.construct;\n  } else {\n    module.exports = _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nmodule.exports = _construct;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nvar setPrototypeOf = require(\"./setPrototypeOf\");\n\nvar isNativeFunction = require(\"./isNativeFunction\");\n\nvar construct = require(\"./construct\");\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  module.exports = _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}\n\nmodule.exports = _wrapNativeSuper;","(function(global, factory) {\n  typeof exports === \"object\" && typeof module !== \"undefined\"\n    ? (module.exports = factory())\n    : typeof define === \"function\" && define.amd\n    ? define(factory)\n    : ((global = global || self), (global.DT = factory()));\n})(this, function() {\n  function checkTime(time) {\n    return /^(\\d+):([0-5][0-9]):([0-5][0-9])(\\.\\d{3})?$/.test(time);\n  }\n\n  function checkDuration(duration) {\n    duration = String(duration);\n    return /^(\\d+)(\\.\\d{1,3})?$/.test(duration);\n  }\n\n  return {\n    d2t: function(duration) {\n      if (checkDuration(duration)) {\n        var date = new Date(null);\n        var arr = String(duration).split(\".\");\n        var s = arr[0];\n        var ms = arr[1] ? arr[1].padEnd(3, 0) : 0;\n        date.setSeconds(Number(s));\n        date.setMilliseconds(Number(ms));\n        return date.toISOString().substr(11, 12);\n      } else {\n        throw new Error(\"The format of the duration is incorrect: \" + duration);\n      }\n    },\n    t2d: function(time) {\n      if (checkTime(time)) {\n        var arr = time.split(\".\")[0].split(\":\");\n        var ms = Number(time.split(\".\")[1] || 0) / 1000;\n        var h = Number(arr[0]) * 3600;\n        var m = Number(arr[1]) * 60;\n        var s = Number(arr[2]);\n        return h + m + s + ms;\n      } else {\n        throw new Error(\"The format of the time is incorrect: \" + time);\n      }\n    }\n  };\n});\n","import DT from 'duration-time-conversion';\n\nexport class WFPlayerError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = 'WFPlayerError';\n    }\n}\n\nexport function errorHandle(condition, msg) {\n    if (!condition) {\n        throw new WFPlayerError(msg);\n    }\n    return condition;\n}\n\nexport function durationToTime(duration = 0) {\n    return DT.d2t(duration.toFixed(3));\n}\n\nexport function timeToDuration(time) {\n    return DT.t2d(time);\n}\n\nexport function mergeBuffer(...buffers) {\n    const Cons = buffers[0].constructor;\n    return buffers.reduce((pre, val) => {\n        const merge = new Cons((pre.byteLength | 0) + (val.byteLength | 0));\n        merge.set(pre, 0);\n        merge.set(val, pre.byteLength | 0);\n        return merge;\n    }, new Cons());\n}\n\nexport function getMinAndMax(arr, scale) {\n    let min = 1;\n    let max = -1;\n    for (let i = 0; i < arr.length; i += 1) {\n        const item = arr[i];\n        if (item < min) {\n            min = item;\n        } else if (item > max) {\n            max = item;\n        }\n    }\n    return [min * scale, max * scale];\n}\n\nexport function clamp(num, a, b) {\n    return Math.max(Math.min(num, Math.max(a, b)), Math.min(a, b));\n}\n","import { errorHandle } from './utils';\n\nexport default class Template {\n    constructor(wf) {\n        this.wf = wf;\n        this.canvas = null;\n        this.update();\n    }\n\n    update() {\n        const { container, pixelRatio } = this.wf.options;\n        const { clientWidth, clientHeight } = container;\n        if (this.canvas) {\n            this.canvas.width = clientWidth * pixelRatio;\n            this.canvas.height = clientHeight * pixelRatio;\n        } else {\n            errorHandle(\n                this.wf.constructor.instances.every(wf => wf.options.container !== container),\n                'Cannot mount multiple instances on the same dom element, please destroy the previous instance first.',\n            );\n            errorHandle(clientWidth && clientHeight, 'The width and height of the container cannot be 0');\n            container.innerHTML = '';\n            this.canvas = document.createElement('canvas');\n            this.canvas.width = clientWidth * pixelRatio;\n            this.canvas.height = clientHeight * pixelRatio;\n            this.canvas.style.width = '100%';\n            this.canvas.style.height = '100%';\n            container.appendChild(this.canvas);\n        }\n    }\n\n    exportImage() {\n        const elink = document.createElement('a');\n        elink.style.display = 'none';\n        elink.href = this.canvas.toDataURL('image/png');\n        elink.download = `${Date.now()}.png`;\n        document.body.appendChild(elink);\n        elink.click();\n        document.body.removeChild(elink);\n    }\n\n    destroy() {\n        this.wf.options.container.innerHTML = '';\n    }\n}\n","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","import { durationToTime, clamp, getMinAndMax } from './utils';\n\nexport default class Drawer {\n    constructor(wf) {\n        this.wf = wf;\n        this.canvas = wf.template.canvas;\n        this.ctx = this.canvas.getContext('2d');\n        this.gridNum = 0;\n        this.gridGap = 0;\n        this.beginTime = 0;\n\n        this.update();\n\n        wf.on('options', () => {\n            this.update();\n        });\n\n        wf.on('channelData', () => {\n            this.update();\n        });\n    }\n\n    update() {\n        const {\n            currentTime,\n            options: { cursor, grid, ruler, duration, padding },\n        } = this.wf;\n        this.gridNum = duration * 10 + padding * 2;\n        this.gridGap = this.canvas.width / this.gridNum;\n        this.beginTime = Math.floor(currentTime / duration) * duration;\n        this.updateBackground();\n        if (grid) {\n            this.updateGrid();\n        }\n        if (ruler) {\n            this.updateRuler();\n        }\n        this.updateWave();\n        if (cursor) {\n            this.updateCursor();\n        }\n    }\n\n    updateBackground() {\n        const { backgroundColor, paddingColor, padding } = this.wf.options;\n        const { width, height } = this.canvas;\n        this.ctx.clearRect(0, 0, width, height);\n        this.ctx.fillStyle = backgroundColor;\n        this.ctx.fillRect(0, 0, width, height);\n        this.ctx.fillStyle = paddingColor;\n        this.ctx.fillRect(0, 0, padding * this.gridGap, height);\n        this.ctx.fillRect(width - padding * this.gridGap, 0, padding * this.gridGap, height);\n    }\n\n    updateWave() {\n        const {\n            currentTime,\n            options: { progress, waveColor, progressColor, duration, padding, waveScale },\n            decoder: {\n                channelData,\n                audiobuffer: { sampleRate },\n            },\n        } = this.wf;\n        const { width, height } = this.canvas;\n        const middle = height / 2;\n        const waveWidth = width - this.gridGap * padding * 2;\n        const startIndex = clamp(this.beginTime * sampleRate, 0, Infinity);\n        const endIndex = clamp((this.beginTime + duration) * sampleRate, startIndex, Infinity);\n        const step = Math.floor((endIndex - startIndex) / waveWidth);\n        const cursorX = padding * this.gridGap + (currentTime - this.beginTime) * this.gridGap * 10;\n\n        let index = -1;\n        const arr = [];\n        for (let i = startIndex; i < endIndex; i += 1) {\n            arr.push(channelData[i] || 0);\n            if (arr.length >= step && index < waveWidth) {\n                index += 1;\n                const [min, max] = getMinAndMax(arr, waveScale);\n                const waveX = this.gridGap * padding + index;\n                this.ctx.fillStyle = progress && cursorX >= waveX ? progressColor : waveColor;\n                this.ctx.fillRect(waveX, (1 + min) * middle, 1, Math.max(1, (max - min) * middle));\n                arr.length = 0;\n            }\n        }\n    }\n\n    updateGrid() {\n        const { gridColor, pixelRatio } = this.wf.options;\n        const { width, height } = this.canvas;\n        this.ctx.fillStyle = gridColor;\n        for (let index = 0; index < this.gridNum; index += 1) {\n            this.ctx.fillRect(this.gridGap * index, 0, pixelRatio, height);\n        }\n        for (let index = 0; index < height / this.gridGap; index += 1) {\n            this.ctx.fillRect(0, this.gridGap * index, width, pixelRatio);\n        }\n    }\n\n    updateRuler() {\n        const { rulerColor, pixelRatio, padding, rulerAtTop } = this.wf.options;\n        const { height } = this.canvas;\n        const fontSize = 11;\n        const fontHeight = 15;\n        const fontTop = 30;\n        this.ctx.font = `${fontSize * pixelRatio}px Arial`;\n        this.ctx.fillStyle = rulerColor;\n        let second = -1;\n        for (let index = 0; index < this.gridNum; index += 1) {\n            if (index && index >= padding && index <= this.gridNum - padding && (index - padding) % 10 === 0) {\n                second += 1;\n                this.ctx.fillRect(\n                    this.gridGap * index,\n                    rulerAtTop ? 0 : height - fontHeight * pixelRatio,\n                    pixelRatio,\n                    fontHeight * pixelRatio,\n                );\n                this.ctx.fillText(\n                    durationToTime(this.beginTime + second).split('.')[0],\n                    this.gridGap * index - fontSize * pixelRatio * 2 + pixelRatio,\n                    rulerAtTop ? fontTop * pixelRatio : height - fontTop * pixelRatio + fontSize,\n                );\n            } else if (index && (index - padding) % 5 === 0) {\n                this.ctx.fillRect(\n                    this.gridGap * index,\n                    rulerAtTop ? 0 : height - (fontHeight / 2) * pixelRatio,\n                    pixelRatio,\n                    (fontHeight / 2) * pixelRatio,\n                );\n            }\n        }\n    }\n\n    updateCursor() {\n        const {\n            currentTime,\n            options: { cursorColor, pixelRatio, padding },\n        } = this.wf;\n        const { height } = this.canvas;\n        this.ctx.fillStyle = cursorColor;\n        this.ctx.fillRect(\n            padding * this.gridGap + (currentTime - this.beginTime) * this.gridGap * 10,\n            0,\n            pixelRatio,\n            height,\n        );\n    }\n}\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","var debounce = require('./debounce'),\n    isObject = require('./isObject');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n","import throttle from 'lodash/throttle';\nimport { errorHandle } from './utils';\n\nexport default class Decoder {\n    constructor(wf) {\n        this.wf = wf;\n        this.audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n        this.throttleDecodeAudioData = throttle(this.decodeAudioData, 500);\n        this.audiobuffer = this.audioCtx.createBuffer(2, 22050, 44100);\n        this.channelData = new Float32Array();\n\n        this.wf.on('loading', uint8 => {\n            this.throttleDecodeAudioData(uint8);\n        });\n    }\n\n    decodeAudioData(uint8) {\n        const {\n            options: { channel },\n            duration,\n        } = this.wf;\n        this.audioCtx\n            .decodeAudioData(uint8.buffer)\n            .then(audiobuffer => {\n                this.audiobuffer = audiobuffer;\n                this.wf.emit('audiobuffer', this.audiobuffer);\n                this.wf.emit('decodeing', this.audiobuffer.duration / duration);\n                this.channelData = audiobuffer.getChannelData(channel) || new Float32Array();\n                this.wf.emit('channelData', this.channelData);\n            })\n            .catch(error => {\n                errorHandle(false, `It seems that the AudioContext decoding get wrong: ${error.message.trim()}`);\n            });\n    }\n\n    destroy() {\n        this.audiobuffer = this.audioCtx.createBuffer(2, 22050, 44100);\n        this.channelData = new Float32Array();\n    }\n}\n","import { mergeBuffer } from './utils';\n\nexport default class Loader {\n    constructor(wf) {\n        this.wf = wf;\n        this.fileSize = 0;\n        this.loadSize = 0;\n        this.data = new Uint8Array();\n        this.reader = null;\n        this.abortController = null;\n    }\n\n    load(url) {\n        this.destroy();\n        this.abortController = new AbortController();\n        const { withCredentials, cors, headers } = this.wf.options;\n        this.wf.emit('loadStart');\n        return fetch(url, {\n            credentials: withCredentials ? 'include' : 'omit',\n            mode: cors ? 'cors' : 'no-cors',\n            signal: this.abortController.signal,\n            headers,\n        })\n            .then(response => {\n                if (response.body && typeof response.body.getReader === 'function') {\n                    this.fileSize = Number(response.headers.get('content-length'));\n                    this.wf.emit('fileSize', this.fileSize);\n                    this.reader = response.body.getReader();\n                    return function read() {\n                        return this.reader.read().then(({ done, value }) => {\n                            if (done) {\n                                this.wf.emit('loadEnd');\n                                return null;\n                            }\n                            this.loadSize += value.byteLength;\n                            this.wf.emit('downloading', this.loadSize / this.fileSize);\n                            this.data = mergeBuffer(this.data, value);\n                            this.wf.emit('loading', this.data.slice());\n                            return read.call(this);\n                        });\n                    }.call(this);\n                }\n                return response.arrayBuffer();\n            })\n            .then(arrayBuffer => {\n                if (arrayBuffer && arrayBuffer.byteLength) {\n                    const uint8 = new Uint8Array(arrayBuffer);\n                    this.fileSize = uint8.byteLength;\n                    this.wf.emit('fileSize', this.fileSize);\n                    this.loadSize = uint8.byteLength;\n                    this.wf.emit('downloading', this.loadSize / this.fileSize);\n                    this.wf.emit('loading', uint8);\n                    this.wf.emit('loadEnd');\n                }\n            });\n    }\n\n    destroy() {\n        this.fileSize = 0;\n        this.loadSize = 0;\n        this.data = new Uint8Array();\n        if (this.reader) {\n            this.reader.cancel();\n            this.reader = null;\n        }\n        if (this.abortController) {\n            this.abortController.abort();\n            this.abortController = null;\n        }\n    }\n}\n","import throttle from 'lodash/throttle';\nimport { clamp } from './utils';\n\nexport default class Controller {\n    constructor(wf) {\n        this.wf = wf;\n        this.playTimer = null;\n        this.wf.on('load', () => {\n            this.clickInit();\n            this.resizeInit();\n            this.playInit();\n        });\n    }\n\n    getTimeFromEvent(event) {\n        const {\n            currentTime,\n            template: { canvas },\n            options: { duration, padding, container, pixelRatio },\n        } = this.wf;\n        const gridNum = duration * 10 + padding * 2;\n        const gridGap = canvas.width / gridNum;\n        const left = clamp(event.pageX - container.offsetLeft - (padding * gridGap) / pixelRatio, 0, Infinity);\n        const beginTime = Math.floor(currentTime / duration) * duration;\n        const time = clamp(((left / gridGap) * pixelRatio) / 10 + beginTime, beginTime, beginTime + duration);\n        return time;\n    }\n\n    clickInit() {\n        const {\n            template: { canvas },\n            events: { proxy },\n        } = this.wf;\n        proxy(canvas, ['click', 'contextmenu'], event => {\n            const time = this.getTimeFromEvent(event);\n            this.wf.emit(event.type, time, event);\n        });\n    }\n\n    moveInit() {\n        const {\n            template: { canvas },\n            events: { proxy },\n        } = this.wf;\n\n        let isDroging = false;\n        let startTime = 0;\n        let endTime = 0;\n        proxy(canvas, 'mousedown', event => {\n            isDroging = true;\n            startTime = this.getTimeFromEvent(event);\n            this.wf.emit(event.type, startTime, event);\n        });\n\n        proxy(document, 'mousemove', event => {\n            if (!isDroging) return;\n            endTime = this.getTimeFromEvent(event);\n            this.wf.emit(event.type, endTime, event);\n        });\n\n        proxy(document, 'mouseup', event => {\n            const startTimeCopy = startTime;\n            const endTimeCopy = endTime;\n            startTime = 0;\n            endTime = 0;\n            if (!endTimeCopy) return;\n            const minTime = Math.floor(Math.min(startTimeCopy, endTimeCopy));\n            const maxTime = Math.ceil(Math.max(startTimeCopy, endTimeCopy));\n            const duration = maxTime - minTime;\n            if (duration < 1) return;\n            if (!isDroging) return;\n            isDroging = false;\n            this.wf.emit(\n                event.type,\n                {\n                    minTime,\n                    maxTime,\n                    duration,\n                },\n                event,\n            );\n        });\n    }\n\n    resizeInit() {\n        const {\n            template,\n            drawer,\n            events: { proxy },\n        } = this.wf;\n        const throttleResize = throttle(() => {\n            template.update();\n            drawer.update();\n            this.wf.emit('resize');\n        }, 500);\n        proxy(window, ['resize', 'orientationchange'], () => {\n            throttleResize();\n        });\n    }\n\n    playInit() {\n        const {\n            drawer,\n            options: { mediaElement },\n        } = this.wf;\n        if (!mediaElement) return;\n        (function loop() {\n            this.playTimer = requestAnimationFrame(() => {\n                if (this.wf.playing) {\n                    drawer.update();\n                    this.wf.emit('playing', mediaElement.currentTime);\n                }\n\n                if (!this.wf.isDestroy) {\n                    loop.call(this);\n                }\n            });\n        }.call(this));\n    }\n\n    destroy() {\n        cancelAnimationFrame(this.playTimer);\n    }\n}\n","import validator from 'option-validator';\nimport Emitter from './emitter';\nimport Events from './events';\nimport Template from './template';\nimport Drawer from './drawer';\nimport Decoder from './decoder';\nimport Loader from './loader';\nimport Controller from './controller';\nimport { timeToDuration, clamp, errorHandle } from './utils';\n\nlet id = 0;\nconst instances = [];\nexport default class WFPlayer extends Emitter {\n    static get instances() {\n        return instances;\n    }\n\n    static get version() {\n        return '__VERSION__';\n    }\n\n    static get env() {\n        return '__ENV__';\n    }\n\n    static get default() {\n        return {\n            container: '#waveform',\n            mediaElement: null,\n            waveColor: 'rgba(255, 255, 255, 0.1)',\n            backgroundColor: 'rgb(28, 32, 34)',\n            paddingColor: 'rgba(255, 255, 255, 0.05)',\n            cursor: true,\n            cursorColor: '#ff0000',\n            progress: true,\n            progressColor: 'rgba(255, 255, 255, 0.5)',\n            grid: true,\n            gridColor: 'rgba(255, 255, 255, 0.05)',\n            ruler: true,\n            rulerColor: 'rgba(255, 255, 255, 0.5)',\n            rulerAtTop: true,\n            withCredentials: false,\n            cors: false,\n            headers: {},\n            pixelRatio: window.devicePixelRatio,\n            channel: 0,\n            duration: 10,\n            padding: 5,\n            waveScale: 0.8,\n        };\n    }\n\n    static get scheme() {\n        const checkNum = (name, min) => (value, type) => {\n            errorHandle(type === 'number', `${name} expects to receive number as a parameter.`);\n            errorHandle(\n                value >= min && Number.isInteger(value),\n                `${name} expect a positive integer greater than or equal to ${min}, but got ${value}.`,\n            );\n            return true;\n        };\n\n        return {\n            container: 'htmlelement|htmldivelement',\n            mediaElement: 'null|htmlvideoelement|htmlaudioelement',\n            waveColor: 'string',\n            backgroundColor: 'string',\n            paddingColor: 'string',\n            cursor: 'boolean',\n            cursorColor: 'string',\n            progress: 'boolean',\n            progressColor: 'string',\n            grid: 'boolean',\n            gridColor: 'string',\n            ruler: 'boolean',\n            rulerColor: 'string',\n            rulerAtTop: 'boolean',\n            withCredentials: 'boolean',\n            cors: 'boolean',\n            headers: 'object',\n            pixelRatio: checkNum('pixelRatio', 1),\n            channel: checkNum('channel', 0),\n            duration: checkNum('duration', 1),\n            padding: checkNum('padding', 1),\n            waveScale: (value, type) => {\n                errorHandle(type === 'number', `waveScale expects to receive number as a parameter.`);\n                errorHandle(\n                    value >= 0.1 && value <= 2,\n                    `waveScale expect a number that greater than or equal to 0.1 and less than or equal to 2, but got ${value}.`,\n                );\n                return true;\n            },\n        };\n    }\n\n    constructor(options = {}) {\n        super();\n\n        this._currentTime = 0;\n        this.isDestroy = false;\n        this.options = {};\n        this.setOptions(options);\n\n        this.events = new Events(this);\n        this.template = new Template(this);\n        this.decoder = new Decoder(this);\n        this.drawer = new Drawer(this);\n        this.controller = new Controller(this);\n        this.loader = new Loader(this);\n\n        id += 1;\n        this.id = id;\n        instances.push(this);\n    }\n\n    get currentTime() {\n        return this.options.mediaElement ? this.options.mediaElement.currentTime : this._currentTime;\n    }\n\n    get duration() {\n        return this.options.mediaElement ? this.options.mediaElement.duration : timeToDuration('99:59:59.999');\n    }\n\n    get playing() {\n        const { mediaElement } = this.options;\n        if (mediaElement) {\n            return !!(\n                mediaElement.currentTime > 0 &&\n                !mediaElement.paused &&\n                !mediaElement.ended &&\n                mediaElement.readyState > 2\n            );\n        }\n        return false;\n    }\n\n    setOptions(options = {}) {\n        errorHandle(validator.kindOf(options) === 'object', 'setOptions expects to receive object as a parameter.');\n\n        if (typeof options.container === 'string') {\n            options.container = document.querySelector(options.container);\n        }\n\n        if (typeof options.mediaElement === 'string') {\n            options.mediaElement = document.querySelector(options.mediaElement);\n        }\n\n        this.options = validator(\n            {\n                ...WFPlayer.default,\n                ...this.options,\n                ...options,\n            },\n            WFPlayer.scheme,\n        );\n\n        this.emit('options', this.options);\n        return this;\n    }\n\n    load(target) {\n        if (target instanceof HTMLVideoElement || target instanceof HTMLAudioElement) {\n            this.options.mediaElement = target;\n            target = target.src;\n        }\n        errorHandle(\n            typeof target === 'string' && target.trim(),\n            `The load target is not a string. If you are loading a mediaElement, make sure the mediaElement.src is not empty.`,\n        );\n        this.loader.load(target);\n        this.emit('load');\n        return this;\n    }\n\n    seek(second) {\n        errorHandle(typeof second === 'number', 'seek expects to receive number as a parameter.');\n        this._currentTime = clamp(second, 0, this.duration);\n        this.drawer.update();\n        return this;\n    }\n\n    exportImage() {\n        this.template.exportImage();\n        return this;\n    }\n\n    destroy() {\n        this.isDestroy = true;\n        this.events.destroy();\n        this.template.destroy();\n        this.controller.destroy();\n        this.decoder.destroy();\n        this.loader.destroy();\n        instances.splice(instances.indexOf(this), 1);\n    }\n}\n"],"names":["_typeof","this","Emitter","name","fn","ctx","e","push","self","listener","off","args","apply","_","on","evtArr","slice","data","i","length","callback","evts","liveEvents","len","Events","destroyEvents","proxy","bind","target","option","Array","isArray","forEach","item","addEventListener","removeEventListener","event","WFPlayerError","message","Error","errorHandle","condition","msg","durationToTime","duration","DT","d2t","toFixed","timeToDuration","time","t2d","mergeBuffer","buffers","Cons","constructor","reduce","pre","val","merge","byteLength","set","getMinAndMax","arr","scale","min","max","clamp","num","a","b","Math","Template","wf","canvas","update","options","container","pixelRatio","clientWidth","clientHeight","width","height","instances","every","innerHTML","document","createElement","style","appendChild","elink","display","href","toDataURL","download","Date","now","body","click","removeChild","Drawer","template","getContext","gridNum","gridGap","beginTime","currentTime","cursor","grid","ruler","padding","floor","updateBackground","updateGrid","updateRuler","updateWave","updateCursor","backgroundColor","paddingColor","clearRect","fillStyle","fillRect","progress","waveColor","progressColor","waveScale","decoder","channelData","sampleRate","audiobuffer","middle","waveWidth","startIndex","Infinity","endIndex","step","cursorX","index","waveX","gridColor","rulerColor","rulerAtTop","fontSize","fontHeight","fontTop","font","second","fillText","split","cursorColor","global","freeGlobal","root","Symbol","objectProto","nativeObjectToString","symToStringTag","getRawTag","objectToString","isObjectLike","baseGetTag","isSymbol","isObject","toNumber","FUNC_ERROR_TEXT","debounce","Decoder","audioCtx","window","AudioContext","webkitAudioContext","throttleDecodeAudioData","throttle","decodeAudioData","createBuffer","Float32Array","uint8","channel","buffer","then","emit","getChannelData","catch","error","trim","Loader","fileSize","loadSize","Uint8Array","reader","abortController","url","destroy","AbortController","withCredentials","cors","headers","fetch","credentials","mode","signal","response","getReader","Number","get","read","done","value","call","arrayBuffer","cancel","abort","Controller","playTimer","clickInit","resizeInit","playInit","left","pageX","offsetLeft","events","getTimeFromEvent","type","isDroging","startTime","endTime","startTimeCopy","endTimeCopy","minTime","maxTime","ceil","drawer","throttleResize","mediaElement","loop","requestAnimationFrame","playing","isDestroy","cancelAnimationFrame","id","WFPlayer","devicePixelRatio","checkNum","isInteger","_currentTime","setOptions","controller","loader","validator","kindOf","querySelector","default","scheme","HTMLVideoElement","HTMLAudioElement","src","load","exportImage","splice","indexOf","paused","ended","readyState"],"mappings":"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"}